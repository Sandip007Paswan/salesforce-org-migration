<template>
    <lightning-button label="Add Products" onclick={openModal}></lightning-button>

    <template if:true={isModalOpen}>
        <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <h2 class="slds-modal__title">Add Products</h2>
                </header>
                <div class="slds-modal__content slds-p-around_medium">
                    <lightning-input type="search" label="Search Products" value={searchKey} onchange={handleSearch}></lightning-input>
                   <lightning-datatable
                        key-field="Id"
                        data={products}
                        columns={columns}
                        selected-rows={selectedProductIds}
                        onrowselection={handleRowSelection}
                        >
                    </lightning-datatable>

                </div>
                <footer class="slds-modal__footer">
                    <lightning-button variant="neutral" label="Cancel" onclick={closeModal}></lightning-button>
                    <lightning-button variant="brand" label="Next" onclick={goToNext}></lightning-button>
                </footer>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
      <template if:true={showEditor}>
        <c-product-editor
            selected-products={selectedProducts}
            opportunity-id={opportunityId}
            onclose={closeModal}>
        </c-product-editor>
    </template>
</template>